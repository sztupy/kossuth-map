<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
   integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
   crossorigin=""/>
   <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
   integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
   crossorigin=""></script>
    <script src="lines.js"></script>
    <style>
      html, body {
        width: 100%;
        height: 100%;
        margin: 0;
      }

      #map {
        width: 100%;
        height: 100%;
        margin: 0;
        background: white;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      function drawLines(points, color) {
        let polyline = L.polyline(points, {color: color, weight: 0.2}).addTo(map);
      }

      var map = L.map('map').setView([51.505, -0.09], 6);

      // L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      //     attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      // }).addTo(map);

      let swapCount = Math.round(lines.length / 360);
      let hsl = 0;
      let points = [];
      for (let i = 0; i<lines.length; i++) {
        points.push([lines[i][1], lines[i][2]]);
        swapCount -= 1;
        if (swapCount <= 0) {
          drawLines(points, `hsl(${hsl}, 100%, 50%)`);
          points = [];
          swapCount = Math.round(lines.length / 360);
          hsl += 1;
        }
      }

      drawLines(points, 'hsl(360, 100%, 50%)');
    </script>
  </body>
</html>
